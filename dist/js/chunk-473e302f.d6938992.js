(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-473e302f"],{2439:function(e,t,n){},4259:function(e,t,n){},"54c0":function(e,t,n){"use strict";var i=n("4259"),o=n.n(i);o.a},"70f5":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",attrs:{model:e.jobForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"选择作业",prop:"actionJob",rules:{required:!0,message:"请选择一个作业"}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.actionJobName,expression:"actionJobName"}],staticClass:"el-input__inner",attrs:{readonly:""},domProps:{value:e.actionJobName},on:{click:function(t){e.isJobOpen=!e.isJobOpen},input:function(t){t.target.composing||(e.actionJobName=t.target.value)}}}),i("my-popup",{attrs:{"is-open":e.isJobOpen,list:e.jobList},on:{changeOpen:e.changeOpen,ascertain:e.ascertain}})],1),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.jobForm.exp,callback:function(t){e.$set(e.jobForm,"exp",t)},expression:"jobForm.exp"}})],1),e._l(e.jobForm.fileList,(function(e,t){return i("el-form-item",{key:t,staticClass:"preview"},[i("img",{staticStyle:{width:"130px",height:"130px",border:"1px solid #ccc"},attrs:{src:e.url,alt:e.name}})])})),i("el-form-item",{staticClass:"preview",attrs:{label:"作业图片",prop:"fileList",rules:{required:!0,message:"作业图片不能为空"}}},[i("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",autocapitalize:"characters"},on:{change:e.updateFile}}),i("img",{staticStyle:{border:"1px dashed #ccc"},attrs:{src:n("7edd"),height:"130",width:"130"},on:{click:function(t){return e.$refs.file.click()}}})]),i("el-form-item",[i("el-button",{staticClass:"btn",staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.submit}},[e._v("点击上传")])],1)],2)],1)},o=[],r=(n("4de4"),n("fb6a"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mt-popup",{staticStyle:{width:"100%"},attrs:{position:"bottom","pop-transition":"popup-fade"},model:{value:e.isOpenWindow,callback:function(t){e.isOpenWindow=t},expression:"isOpenWindow"}},[n("mt-picker",{attrs:{slots:e.list},on:{change:e.onJobChange}}),n("div",[n("el-button",{staticClass:"btn",on:{click:e.ascertain}},[e._v("确定")]),n("el-button",{staticClass:"btn",on:{click:function(t){e.isOpenWindow=!1}}},[e._v("取消")])],1)],1)},s=[],c={name:"myPopup",props:{isOpen:{require:!0,type:Boolean},list:{require:!0,type:Array}},data:function(){return{tempAction:"",isOpenWindow:this.isOpen}},methods:{onJobChange:function(e,t){this.tempAction=t[0]},ascertain:function(){this.$emit("ascertain",this.tempAction),this.isOpenWindow=!1}},watch:{isOpen:function(e){this.isOpenWindow=e},isOpenWindow:function(e){this.$emit("changeOpen",e)}}},l=c,u=(n("54c0"),n("2877")),p=Object(u["a"])(l,a,s,!1,null,"5a8718f0",null),f=p.exports,m={name:"Job",data:function(){return{jobList:[{flex:1,values:["2015-01","2015-02","2015-03","2015-04","2015-05","2015-06"],className:"slot1",textAlign:"center"}],workList:[],isJobOpen:!1,actionJobName:"",jobForm:{fileList:[],exp:"",actionJob:""}}},methods:{showJobList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request({url:"work/userClassWork",method:"GET"});case 2:n=t.sent,console.log(n),e.jobList[0].values.length=0,n.filter((function(t){return e.jobList[0].values.push(t.workName)})),e.workList=n;case 7:case"end":return t.stop()}}),t)})))()},changeOpen:function(e){this.isJobOpen=e},ascertain:function(e){console.log(e),this.actionJobName=e,this.jobForm.actionJob=this.workList.filter((function(t){return t.workName===e}))[0].workId},updateFile:function(){var e=this.$refs.file.files[0].slice();this.jobForm.fileList.push({url:URL.createObjectURL(e),value:e,name:this.$refs.file.files[0].name}),this.$refs.file.value=""},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){var i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:for(i=new FormData,o=0;o<e.jobForm.fileList.length;o++)i.append("file",e.jobForm.fileList[o].value,e.jobForm.fileList[o].name);return i.append("subExp",e.jobForm.exp),i.append("workId",e.jobForm.actionJob),t.next=8,e.$request({url:"work/submitWork",data:i,method:"POST"});case 8:r=t.sent,console.log(r),e.$mint.Toast({message:r.str,iconClass:200===r.num?"el-icon-check":"el-icon-close"});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},mounted:function(){this.showJobList()},components:{myPopup:f}},b=m,d=(n("aedf"),Object(u["a"])(b,i,o,!1,null,"655c84ad",null));t["default"]=d.exports},"7edd":function(e,t,n){e.exports=n.p+"img/timg.1302f06b.png"},aedf:function(e,t,n){"use strict";var i=n("2439"),o=n.n(i);o.a},b0c0:function(e,t,n){var i=n("83ab"),o=n("9bf2").f,r=Function.prototype,a=r.toString,s=/^\s*function ([^ (]*)/,c="name";!i||c in r||o(r,c,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},fb6a:function(e,t,n){"use strict";var i=n("23e7"),o=n("861d"),r=n("e8b5"),a=n("23cb"),s=n("50c4"),c=n("fc6a"),l=n("8418"),u=n("b622"),p=n("1dde"),f=n("ae40"),m=p("slice"),b=f("slice",{ACCESSORS:!0,0:0,1:2}),d=u("species"),h=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!m||!b},{slice:function(e,t){var n,i,u,p=c(this),f=s(p.length),m=a(e,f),b=a(void 0===t?f:t,f);if(r(p)&&(n=p.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?o(n)&&(n=n[d],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(p,m,b);for(i=new(void 0===n?Array:n)(v(b-m,0)),u=0;m<b;m++,u++)m in p&&l(i,u,p[m]);return i.length=u,i}})}}]);
//# sourceMappingURL=chunk-473e302f.d6938992.js.map